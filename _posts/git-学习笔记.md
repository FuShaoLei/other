---
title: Git | Gitå­¦ä¹ ç¬”è®°
top: 0
date: 2020-02-03 10:55:36
tags: git

---

# å‚è€ƒæ•™ç¨‹

- å­¦ä¹ æ•™ç¨‹ï¼š[å»–é›ªå³°çš„Gitæ•™ç¨‹](https://www.liaoxuefeng.com/wiki/896043488029600)
- æµ‹è¯•ï¼š[learngitbranching](https://learngitbranching.js.org/)

# è„‘å›¾(æ›´æ–°ä¸­)

<div id="test5" style="width:100%;height:500px;"></div>

<script type="text/javascript"src="/js/echarts.min.js"></script>
<script type="text/javascript"src="/js/jquery.js"></script>

<script type="text/javascript">
var  myChart5 = echarts.init(document.getElementById("test5"));//divå…ƒç´ èŠ‚ç‚¹çš„å¯¹è±¡
myChart5.showLoading();
$.getJSON('/json/git_study.json', function (data) {
    myChart5.hideLoading();
    echarts.util.each(data.children, function (datum, index) {
        index % 2 === 0 && (datum.collapsed = true);
    });
    myChart5.setOption(option = {
        tooltip: {
            trigger: 'item',
            triggerOn: 'mousemove'
        },
        series: [
            {
                type: 'tree',
                data: [data],
                top: '1%',
                left: '10%',
                bottom: '1%',
                right: '30%',
                symbolSize: 7,
                label: {
                    position: 'left',
                    verticalAlign: 'middle',
                    align: 'right',
                    fontSize: 12
                },
                leaves: {
                    label: {
                        position: 'right',
                        verticalAlign: 'middle',
                        align: 'left'
                    }
                },
                expandAndCollapse: true,
                animationDuration: 550,
                animationDurationUpdate: 750
            }
        ]
    });
    window.onresize=function(){
      myChart5.resize();
 } 
});

</script>

# ç¬”è®°

## ğŸ¥ç®€ä»‹

ç”±Linusç”¨cè¯­è¨€å¼€å‘çš„åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿ

## ğŸ’‰ç‰ˆæœ¬ç©¿æ¢­

å¯å…ˆç”¨`git log`æŒ‡ä»¤æŸ¥çœ‹ä¸€ä¸‹æœ‰å‡ ä¸ªç‰ˆæœ¬æäº¤åˆ°äº†ä»“åº“é‡Œ
<!--more-->
![](git-å­¦ä¹ ç¬”è®°/1.png)

æˆ–ç”¨`git log --pretty=oneline`å¯ä»¥ç®€å•çš„çœ‹åˆ°ç‰ˆæœ¬å·
![](git-å­¦ä¹ ç¬”è®°/2.png)

### ç‰ˆæœ¬å€’é€€ï¼ˆå›è¿‡å»ï¼‰

`git reset --hard ?`  
**?é‡Œ**
- å¯ä»¥å¡«`HEAD^`æ ‡è¯†ä¸Šä¸ªç‰ˆæœ¬ï¼Œä¸Šä¸Šä¸ªç‰ˆæœ¬å°±æ˜¯`HEAD^^`ï¼Œå‡å¦‚æ›´ä¸Šçš„è¯å°±æ˜¯`HEAD~100`
- ä¹Ÿå¯ä»¥ç›´æ¥å¡«ç‰ˆæœ¬å·ï¼Œåªè¦å†™å‰å‡ ä¸ªå°±è¡Œï¼Œæ¯”å¦‚ä¸Šé¢ç›´æ¥å†™`git reset --hard 9410f`å°±ä¼šé€€å›åˆ°ä¸Šä¸€ä¸ªç‰ˆæœ¬äº†

![](git-å­¦ä¹ ç¬”è®°/3.png)

### ç‰ˆæœ¬æ¢å¤ï¼ˆå»æœªæ¥ï¼‰

é¦–å…ˆæŸ¥çœ‹ä¸€ä¸‹å†å²ä¿¡æ¯`git reflog`,ç„¶åæ ¹æ®ç‰ˆæœ¬å·å†™`git reset --hard ç‰ˆæœ¬å·`,å°±è¿™ä¹ˆç®€å•ğŸ˜‹

![](git-å­¦ä¹ ç¬”è®°/4.png)

## ğŸ›€å·¥ä½œåŒºå’Œæš‚å­˜åŒº
`git add æ–‡ä»¶`æŒ‡ä»¤æ˜¯æŠŠæ–‡ä»¶ä¿®æ”¹æ·»åŠ åˆ°æš‚å­˜åŒº
è€Œ`git commit -m "XXXX"`å°±æ˜¯å¾€åˆ†æ”¯ä¸Šæäº¤æ›´æ”¹

### æ’¤é”€ä¿®æ”¹

#### æ’¤é”€æœªè¢«`git add`çš„ä¿®æ”¹

`git checkout -- file`å¯ä»¥æŠŠ`file`åœ¨å·¥ä½œåŒºçš„ä¿®æ”¹å…¨éƒ¨æ’¤é”€
è¿™é‡Œå‡ºç°äº†ä¸¤ç§æƒ…å†µ
- æœª`git add`ï¼Œé‚£ä¹ˆå°†æ¢å¤åˆ°æœªè¢«ä¿®æ”¹çš„æ ·å­
- å·²`git add`ï¼Œç„¶ååˆä¿®æ”¹äº†ä¸€ä¸‹ï¼Œé‚£ä¹ˆå°†æ¢å¤åˆ°`git add`åçš„æ ·å­ï¼Œå°±æ˜¯æ¢å¤åˆ°æœ€è¿‘ä¸€æ¬¡`git add`åçš„æ ·å­

#### æ’¤é”€æäº¤åˆ°`git add`çš„ä¿®æ”¹
è¿™é‡Œåˆ†ä¸¤æ­¥èµ°ï¼š
- é¦–å…ˆè¦æŠŠåœ¨æš‚å­˜åŒºçš„ç»™æå‡ºæ¥ï¼Œ`git restore --staged file`ï¼Œä¹Ÿå°±æ˜¯æ¢å¤åˆ°æœªæäº¤ä¿®æ”¹çš„çŠ¶æ€
- ç„¶ååœ¨`git checkout -- file` æŠŠåœ¨å·¥ä½œåŒºçš„ä¿®æ”¹ï¼ˆ`git restore --staged file`æå‡ºæ¥çš„ï¼‰å…¨éƒ¨æ’¤é”€

**æ³¨ï¼š**
ç”±äºgitæ›´æ–°æ¢ä»£ï¼Œæ‰€ä»¥è¿™é‡Œä¸å»–è€å¸ˆçš„æœ‰äº›å‡ºå…¥ï¼Œå…³äº`git restore --staged file`çš„åŠŸèƒ½å¦‚ä¸‹ï¼š

![](git-å­¦ä¹ ç¬”è®°/5.png)

### åˆ é™¤æ–‡ä»¶

#### åˆ é”™äº†
å¯ä»¥ç”¨`git checkout -- fileï¼ˆè¢«åˆ æ–‡ä»¶åï¼‰`æ¥æ¢å¤é‚£ä¸ªè¢«åˆ æ–‡ä»¶

#### ç¡®å®è¦åˆ 
ç›´æ¥`git rm fileï¼ˆè¦åˆ æ–‡ä»¶åï¼‰`ï¼Œç„¶åå†`git commit `æäº¤ä¿®æ”¹ï¼Œå°±è¡Œäº†

> ä¸€äº›æƒ³æ³•ï¼šè¿™é‡Œçš„`git rm file`å®é™…ä¸Šä¹Ÿæ˜¯å°†è¦åšçš„ä¿®æ”¹æäº¤åˆ°æš‚å­˜åŒºï¼Œç„¶å`git commit`æ‰æäº¤ä¿®æ”¹ï¼Œå› æ­¤å¦‚æœè¿™é‡Œæƒ³åæ‚”çš„è¯ï¼Œå¯ä»¥ç”¨`git restore --staged file`æŠŠåœ¨æš‚å­˜åŒºçš„ä¿®æ”¹ç»™æ’¤é”€æ‰
![](git-å­¦ä¹ ç¬”è®°/6.png)
ç”±å›¾å¾ˆç®€å•çš„çŸ¥é“ï¼Œç»¿è‰²å°±ä»£è¡¨æ”¾å…¥äº†æš‚å­˜åŒºï¼Œçº¢è‰²å°±ä»£è¡¨æœªæ”¾å…¥

ç”±ä¸Šé¢è®¸è®¸å¤šå¤šæ¡ˆåˆ—å¯ä»¥çŸ¥é“ï¼Œgitæ“ä½œæ—¶ï¼Œæ€»æ˜¯å…ˆåœ¨æš‚å­˜åŒºé‡Œè¿›è¡Œæ“ä½œï¼Œç„¶åå†æäº¤åˆ°åˆ†æ”¯ä¸ŠğŸ”‘

## ğŸ¤³åˆ†æ”¯ç®¡ç†
### åˆ›å»º åˆå¹¶åˆ†æ”¯
#### åˆ›å»º
`git switch -c <branch~name>`å¯ä»¥åˆ›å»ºç„¶åå¹¶è½¬æ¢åˆ°è¿™ä¸ªåˆ†æ”¯ä¸Š
`git switch <branch~name>`å¯ç”¨äºåˆ‡æ¢åˆ†æ”¯ï¼Œ`git branch`å¯ä»¥çœ‹åˆ°å·²æœ‰åˆ†æ”¯ï¼Œå‰é¢å¸¦ä¸€ä¸ª`*`çš„è¡¨ç¤ºç°åœ¨æ‰€åœ¨çš„åˆ†æ”¯
`git branch -d <branch~name>`è¿™ä¸ªæŒ‡ä»¤ç”¨äºåˆ é™¤åˆ†æ”¯ï¼Œå‰ææ˜¯åˆ‡æ¢åˆ°äº†å…¶ä»–åˆ†æ”¯ï¼Œ
å¦‚ä¸‹
![](git-å­¦ä¹ ç¬”è®°/7.png)
#### å…³äºåˆå¹¶
`git merge <branch~name>`åˆå¹¶åˆ†æ”¯ï¼Œ**äº§ç”Ÿçš„å†²çªåªå‘ç”Ÿåœ¨å½“å‰çš„åˆ†æ”¯ä¸Š**
##### ğŸ”¥åˆå¹¶å†²çªä¸è§£å†³æ–¹æ³•
> äº§ç”ŸåŸå› ï¼šåˆ†æ”¯ä¸åˆ†æ”¯åœ¨åŒä¸€ä¸ªåœ°æ–¹ï¼ˆæœ‰å¾…ç ”ç©¶ï¼‰çš„**ä¸åŒä¿®æ”¹**å¯¼è‡´åˆå¹¶æ—¶çš„å†²çª,è¿™æ—¶åªèƒ½æ‰‹åŠ¨çš„ä¿®æ”¹å†²çªçš„åœ°æ–¹ï¼Œå¹¶æäº¤

äº§ç”Ÿå†²çªåï¼š

![](git-å­¦ä¹ ç¬”è®°/9.png)
![](git-å­¦ä¹ ç¬”è®°/10.png)

è¿™æ—¶åªèƒ½æ‰‹åŠ¨ä¿®æ”¹åæäº¤ï¼ˆ`git add`ï¼Œ `git commit`ï¼‰

æäº¤å®Œåå¯é€šè¿‡ `git log --graph --pretty=oneline --abbrev-commit`æŸ¥çœ‹åˆå¹¶çš„æƒ…å†µ
![](git-å­¦ä¹ ç¬”è®°/8.png)

ç®€å•æ€»ç»“ä¸€ä¸‹ï¼Œåˆå¹¶äº§ç”Ÿçš„å†²çª**åªèƒ½æ‰‹åŠ¨è§£å†³åæäº¤**

> ç»ˆäºæ˜ç™½ä¸Šå­¦æœŸå’Œåˆ«äººåˆå†™Appæ—¶ä¼šå‡ºç°çš„`<<<<<<HEAD`æ ‡è¯†äº†ğŸ˜‹

###### ğŸ’§åˆå¹¶åˆ†æ”¯æ—¶çš„æ¨¡å¼
- æ™®é€šçš„`git merge <branch~name>` ä¼˜å…ˆé‡‡ç”¨`Fast forward`æ¨¡å¼ï¼Œä¸ä¼šè®°å½•åˆ†æ”¯ä¿¡æ¯
- ç”¨`git merge --no-ff -m "xxxx" <branch~name>`ä¼šç¦ç”¨`Fast forward`æ¨¡å¼ åˆ™ä¼šè®°å½•åˆ†æ”¯

![](git-å­¦ä¹ ç¬”è®°/14.png)

### BUGåˆ†æ”¯
ä¿®å¤bugæ—¶ï¼Œé€šè¿‡åˆ›å»ºæ–°çš„åˆ†æ”¯æ¥è¿›è¡Œä¿®å¤ï¼Œç„¶ååˆå¹¶åˆ°`master`

å½“å·¥ä½œç°åœºæ²¡æœ‰å®Œæˆçš„æ—¶å€™ğŸ‘‰`git stash`éšè—å·¥ä½œç°åœºä»¥æ–¹ä¾¿ä¿®æ”¹bugï¼Œç”¨`git stash list`å¯æŸ¥çœ‹éšè—çš„ä¸œè¥¿ï¼Œå½“ä¿®å¤å®Œåå¯ç”¨`git stash pop`æ¥è¿›è¡Œæ¢å¤

> **æ³¨ï¼š** `git stash pop`ï¼ˆæ¢å¤å·¥ä½œç°åœºå¹¶åˆ é™¤éšè—ï¼‰=`git stash apply`ï¼ˆæ¢å¤å·¥ä½œç°åœºï¼‰+`git stash drop`ï¼ˆåˆ é™¤éšè—ï¼‰
>> æœ‰çš„æ—¶å€™éœ€è¦ä¸€ä¸ªä¸ªæ¢å¤å·¥ä½œç°åœº![](git-å­¦ä¹ ç¬”è®°/15.png)
é‚£å°±åº”è¯¥å…ˆ`git stash list`æŸ¥çœ‹ä¸€ä¸‹éšè—çš„åˆ—è¡¨ï¼Œå†`git stash apply stash@{x}`æ¢å¤ï¼Œç„¶åè¿˜æœ‰`git stash drop`

#### åœ¨masterä¿®å¤çš„bugçš„æ“ä½œå¤åˆ¶åˆ°å…¶ä»–åˆ†æ”¯ä¸Š
 åœ¨è¦å¤åˆ¶åˆ°çš„åˆ†æ”¯ï¼ˆæ­¤åˆ†æ”¯å¾—å…ˆ`commit`åå†æ“ä½œï¼‰ä¸Šï¼š`git cherry-pick  <commitç >`è¿™é‡Œçš„ `<commit~ç >`æ˜¯æŒ‡ä¿®å¤bugçš„åˆ†æ”¯çš„commitå·ï¼Œå°±åƒä¸‹é¢è¿™å¼ å›¾çš„`34bbddd`

 ![](git-å­¦ä¹ ç¬”è®°/16.png)
 ![](git-å­¦ä¹ ç¬”è®°/17.png)

### ğŸ“Œå¤šäººåä½œ(å¾…é‡è¯»ï¼Œæœªæ€»ç»“)

`git remote -v`å¯ä»¥æŸ¥çœ‹è¿œç¨‹åº“çš„ä¿¡æ¯ï¼Œå¯ä»¥å‘ç°ï¼Œè‹¥æœ¬åœ°çš„åˆ†æ”¯å¦‚ä¸æ¨é€åˆ°è¿œç¨‹ï¼Œå¯¹å…¶ä»–äººæ˜¯ä¸å¯è§çš„ï¼Œå¯ç”¨`git push origin <branch~name>`æ¥æ¨é€ï¼Œå¦‚æœå¤±è´¥å¯ä»¥å…ˆ`git pull`ç„¶åå†ä¿®æ”¹ä»€ä¹ˆçš„ï¼Œåœ¨æœ¬åœ°åˆ›å»ºå’Œè¿œç¨‹åˆ†æ”¯å¯¹åº”çš„åˆ†æ”¯ï¼Œä½¿ç”¨`git checkout -b branch-name origin/branch-name`ï¼Œæœ¬åœ°å’Œè¿œç¨‹åˆ†æ”¯çš„åç§°æœ€å¥½ä¸€è‡´ï¼›
å»ºç«‹æœ¬åœ°åˆ†æ”¯å’Œè¿œç¨‹åˆ†æ”¯çš„å…³è”ï¼Œä½¿ç”¨`git branch --set-upstream branch-name origin/branch-name`
ä»è¿œç¨‹æŠ“å–åˆ†æ”¯ï¼Œä½¿ç”¨`git pull`ï¼Œå¦‚æœæœ‰å†²çªï¼Œè¦å…ˆå¤„ç†å†²çªã€‚

### ğŸ“Œrebase(æœªç†è§£)
`git rebase`æ“ä½œå¯ä»¥æŠŠæœ¬åœ°æœªpushçš„åˆ†å‰æäº¤å†å²æ•´ç†æˆç›´çº¿ï¼›

## ğŸ»æŒ‡ä»¤æ€»ç»“

æŒ‡ä»¤ | è¯´æ˜ 
:-: | :-: |
`git init` | åˆå§‹åŒ– 
`git status` | æŸ¥çœ‹çŠ¶æ€ 
`git diff .` | å¯ä»¥æŸ¥çœ‹å…·ä½“è¢«ä¿®æ”¹äº†é‚£äº›å†…å®¹ï¼ˆåº”åœ¨`git add .`å‰ä½¿ç”¨ï¼‰
`git log` | å¯ä»¥æŸ¥çœ‹æœ‰å‡ ä¸ªç‰ˆæœ¬æäº¤åˆ°ä»“åº“é‡Œ
`git log --pretty=oneline` | åŒä¸Šï¼Œä¸è¿‡ç®€åŒ–äº†äº›
`git reflog` | å¯ä»¥æŸ¥çœ‹æ¯ä¸€æ¬¡å‘½ä»¤ï¼ˆå¯ä»¥çœ‹åˆ°ç‰ˆæœ¬å·ï¼‰
`gir reset --hard ç‰ˆæœ¬å·` | ç‰ˆæœ¬é€€å›æˆ–å›æº¯
`git add æ–‡ä»¶å` | æŠŠä¿®æ”¹æ”¾åˆ°æš‚å­˜åŒº
`git commit -m "xxxxx"` | ä¸€æ¬¡æ€§æŠŠæš‚å­˜åŒºçš„æ‰€æœ‰ä¿®æ”¹æäº¤åˆ°åˆ†æ”¯ä¸Š
`git checkout -- <file~name>` | å¯æŠŠæœª`git add`çš„æ–‡ä»¶ä¿®æ”¹å…¨éƒ¨æ’¤é”€
`git retore --staged <file~name>` | æŠŠ`<file~name>`åœ¨æš‚å­˜åŒºçš„ä¸œè¥¿ç§»å‡º(åˆ°å·¥ä½œåŒºï¼Œä¹Ÿå°±æ˜¯å¯ä»¥è¿›è¡Œ`git checkout -- <file~name>`æ“ä½œ)
`git rm <file~name>` | åˆ é™¤fileæ–‡ä»¶ï¼Œå¹¶æäº¤ä¿®æ”¹åˆ°æš‚å­˜åŒºä¸­
`git switch <branch~name>` | åˆ‡æ¢åˆ†æ”¯
`git switch -c <branch~name>` | åˆ›å»ºå¹¶åˆ‡æ¢åˆ°æ–°çš„åˆ†æ”¯
`git branch` | æŸ¥çœ‹å·²æœ‰åˆ†æ”¯ï¼Œå¸¦`*`çš„æ˜¯ç°æ‰€åœ¨åˆ†æ”¯
`git branch -d <branch~name>` | åˆ é™¤åˆ†æ”¯ï¼ˆå‰ææ˜¯å·²`switch`åˆ°å…¶ä»–åˆ†æ”¯ä¸Šï¼‰
`git branch -D <branch~name>` | åˆ é™¤åˆ†æ”¯,å¼ºè¡Œåˆ é™¤
`git merge <branch~name>` | åˆå¹¶åˆ†æ”¯ï¼ˆä¼˜å…ˆé‡‡ç”¨`Fast forward`æ¨¡å¼ï¼‰
`git merge --no-ff -m "xxxx" <branch~name>` | åˆå¹¶åˆ†æ”¯ï¼ˆç¦ç”¨`Fast forward`æ¨¡å¼ï¼‰
`git log --graph --pretty=oneline --abbrev-commit` | æŸ¥çœ‹åˆå¹¶æƒ…å†µ
`git stash` | éšè—å·¥ä½œç°åœº
`git stash list` | å¯æŸ¥çœ‹`stash`çš„ä¸œè¥¿
`git stash pop` | æ¢å¤å·¥ä½œç°åœºï¼Œæ³¨ï¼š`git stash pop`=`git stash apply`+`git stash drop`
`git cherry-pick  <commitç >` | å¤åˆ¶æ“ä½œ
`git remote` | æŸ¥çœ‹è¿œç¨‹åº“çš„ä¿¡æ¯ï¼Œç”¨`git remote -v`å¯ä»¥çœ‹åˆ°æ›´è¯¦ç»†çš„ä¿¡æ¯
`git push origin <branch~name>` | æ¨é€åä¸º`<branch~name>`çš„åˆ†æ”¯ 

